<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <link rel="stylesheet" href="styles/style.css">
    
    <title>Registro</title>
</head>
    <body>
          <form id="register-form">
              <h3>Register</h3>
              <label class="form-label" for="name">Name:</label>    
              <input class="form-input" type="text" placeholder="name" name="name">  
                       
              <label class="form-label" for="email">Email:</label>                 
              <input class="form-input" type="email" placeholder="Example@gmail.com" name="email">
              
              <label class="form-label" for="pass">Password:</label>
              <input class="form-input" type="password" placeholder="password" name="pass">
              
              <button class="button" id="register-button" >REGISTRAR</button>
              <span class="auth-text">Ya Tienes Cuenta <a class="auth-link" href="login.html">Ingresa</a></span>                        
          </form>     
    
       <script>
	        var registerForm = document.getElementById("register-form");
	        var MyButton = document.getElementById("register-button");
	        
	        var sendRegister = (e) =>{
	            e.preventDefault();
	            var xdatos = new FormData(registerForm);
	            console.log(xdatos.get('name')+" "+xdatos.get('email')+" "+xdatos.get('pass')); 
				
	            let nomb=xdatos.get('name');
	            let mail=xdatos.get('email');
	            let pass=xdatos.get('pass');
	            
	            datos={
	               'name' : nomb,
	              'email' : mail,
	               'pass' : pass
	            };
	            
	            if ((xdatos.get("name") == "") || (xdatos.get("email") == "") ||(xdatos.get("pass") == "")){
                    alert("Alguno Del Campos => Llenar el registro como es debido");
                }else{
	            
	            fetch('http://localhost:8090/WEB_II/Registro', {
	            method:'POST',
	            headers: {'Content-Type': 'application/json'  /*'Content-Type': 'application/x-www-form-urlencoded'*/},
	            body:xdatos,
	            credentials:'include'
	            }).then(response => response.json())
	            .catch(error => console.error('Error:', error))
	            .then(response => {
	            	if(response.status == 200){
	            		alert("Registro exitoso");
	            	}else{
	            		alert("Registro Invalido");
	            	}
	            });
	            }
	        }
	          
	            MyButton.onclick = sendRegister;
	            
        </script>
     </body>   
</html>